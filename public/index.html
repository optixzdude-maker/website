<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Nintendo DS Emulator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    margin: 0;
    background: #000;
    color: #fff;
    font-family: system-ui, sans-serif;
    text-align: center;
  }

  h1 {
    margin: 16px 0 8px;
    font-size: 20px;
  }

  input {
    margin-bottom: 12px;
  }

  /* SAFE centering only */
  .emulator-wrapper {
    margin: 0 auto;
  }

  desmond-player {
    display: block;
    background: black;
  }

  desmond-player canvas {
    image-rendering: pixelated;
  }

  footer {
    opacity: 0.6;
    font-size: 12px;
    margin: 10px 0;
  }
</style>
</head>

<body>

<h1>Nintendo DS Emulator</h1>

<input type="file" id="romInput" accept=".nds">

<div class="emulator-wrapper">
  <desmond-player id="player"></desmond-player>
</div>

<footer>
  Runs locally Â· In-game saves persist
</footer>

<script src="desmond.min.js"></script>
<script>
  const input = document.getElementById("romInput");
  const player = document.getElementById("player");

  let lastUrl = null;

  input.addEventListener("change", () => {
    if (lastUrl) URL.revokeObjectURL(lastUrl);

    const file = input.files[0];
    if (!file) return;

    lastUrl = URL.createObjectURL(file);
    player.loadURL(lastUrl);
  });
</script>

</body>
</html>
